<!-- udacity2.0 -->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Challenge 1</title>
  <link rel="stylesheet" href="../assets/css/bootstrap.min.css">
  <link rel="stylesheet" href="../assets/css/plyr.css">
  <link rel="stylesheet" href="../assets/css/katex.min.css">
  <link rel="stylesheet" href="../assets/css/jquery.mCustomScrollbar.min.css">
  <link rel="stylesheet" href="../assets/css/styles.css">
  <link rel="shortcut icon" type="image/png" href="../assets/img/udacimak.png" />
</head>

<body>
  <div class="wrapper">
    <nav id="sidebar">
  <div class="sidebar-header">
    <h3>Getting Started with CloudFormation</h3>
  </div>

  <ul class="sidebar-list list-unstyled CTAs">
    <li>
      <a href="../index.html" class="article">Back to Home</a>
    </li>
  </ul>

  <ul class="sidebar-list list-unstyled components">
    <li class="">
      <a href="01. Introduction.html">01. Introduction</a>
    </li>
    <li class="">
      <a href="02. Course Overview.html">02. Course Overview</a>
    </li>
    <li class="">
      <a href="03. What is DevOps.html">03. What is DevOps</a>
    </li>
    <li class="">
      <a href="04. Why you need DevOps.html">04. Why you need DevOps</a>
    </li>
    <li class="">
      <a href="05. What are the benefits of Cloud DevOps.html">05. What are the benefits of Cloud DevOps?</a>
    </li>
    <li class="">
      <a href="06. Set up Tools.html">06. Set up Tools</a>
    </li>
    <li class="">
      <a href="07. Creating Access Key ID for IAM User.html">07. Creating Access Key ID for IAM User</a>
    </li>
    <li class="">
      <a href="08. Configuring AWS CLI.html">08. Configuring AWS CLI</a>
    </li>
    <li class="">
      <a href="09. Adding Additional Keys.html">09. Adding Additional Keys</a>
    </li>
    <li class="">
      <a href="10. Understanding CloudFormation.html">10. Understanding CloudFormation</a>
    </li>
    <li class="">
      <a href="11. Getting Started With CloudFormation Script.html">11. Getting Started With CloudFormation Script</a>
    </li>
    <li class="">
      <a href="12. Create a VPC Manually.html">12. Create a VPC: Manually</a>
    </li>
    <li class="">
      <a href="13. Exercise - Create a VPC Automated.html">13. Exercise - Create a VPC: Automated</a>
    </li>
    <li class="">
      <a href="14. Exercise - EC2 Instance with an Admin Role.html">14. Exercise - EC2 Instance with an Admin Role</a>
    </li>
    <li class="">
      <a href="15. Conclusion.html">15. Conclusion</a>
    </li>
    <li class="">
      <a href="16. Challenge 1.html">16. Challenge 1</a>
    </li>
  </ul>

  <ul class="sidebar-list list-unstyled CTAs">
    <li>
      <a href="../index.html" class="article">Back to Home</a>
    </li>
  </ul>
</nav>

    <div id="content">
      <header class="container-fluild header">
        <div class="container">
          <div class="row">
            <div class="col-12">
              <div class="align-items-middle">
                <button type="button" id="sidebarCollapse" class="btn btn-toggle-sidebar">
                  <div></div>
                  <div></div>
                  <div></div>
                </button>

                <h1 style="display: inline-block">16. Challenge 1</h1>
              </div>
            </div>
          </div>
        </div>
      </header>

      <main class="container">
        <div class="row">
          <div class="col-12">
            <div class="ud-atom">
  <h3></h3>
  <div>
  <p>As you proceed through this course, we have added a few challenges to make your learning fun. Though the solutions are available for each challenge, we strongly encourage you to give your best shot while attempting them. </p>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <p>Now that you have created your first VPC to deploy servers, go ahead and try the following:</p>
<h1 id="challenge-1---create-an-ec2-instance-in-a-given-vpc">Challenge 1 - Create an EC2 instance in a given VPC</h1>
<h2 id="prerequisites">Prerequisites</h2>
<ol>
<li>You should have a VPC available in your account. Note the ID of a particular VPC, to use in your new template.</li>
</ol>
<blockquote>
  <p>VPCs are specific to a region. </p>
</blockquote>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <figure class="figure">
    <img src="img/screenshot-2021-02-16-at-3.36.55-pm.png" alt="Copy the VPC ID from the web console" class="img img-fluid">
    <figcaption class="figure-caption">
      <p>Copy the VPC ID from the web console</p>
    </figcaption>
  </figure>
</div>


</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <ol start="2">
<li>You should have a <strong>public</strong> subnet available in the VPC selected above. Note down the subnet-ID.</li>
</ol>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <figure class="figure">
    <img src="img/screenshot-2021-02-16-at-3.37.51-pm.png" alt="Copy a public subnet&#x27;s ID" class="img img-fluid">
    <figcaption class="figure-caption">
      <p>Copy a public subnet's ID</p>
    </figcaption>
  </figure>
</div>


</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <h2 id="todo">ToDo</h2>
<p>Write a CloudFormation script that will create the following two Resources: AWS::EC2::SecurityGroup and AWS::EC2::Instance. See the snapshot below as a starter point.</p>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <figure class="figure">
    <img src="img/screenshot-2021-02-16-at-3.48.43-pm.png" alt="Template with two resources: a SecurityGroup and an EC2 instance" class="img img-fluid">
    <figcaption class="figure-caption">
      <p>Template with two resources: a SecurityGroup and an EC2 instance</p>
    </figcaption>
  </figure>
</div>


</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <p>You will have to write the suitable properties for each resource. Inside one of the properties' fields, you will have to specify the VPC and Subnet ID. Details of the resource to create are:</p>
<h3 id="1-awsec2securitygroup">1. AWS::EC2::SecurityGroup</h3>
<p>Creates a Security Group which only allows inbound access on TCP port 80 and also allows unrestricted outbound access. Refer to the <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-security-group.html" rel="noopener noreferrer" target="_blank">documentation</a> to check which properties you want to use.</p>
<h3 id="2-awsec2instance">2. AWS::EC2::Instance</h3>
<p>In the same CloudFormation script: create a resource that deploys an EC2 Server and associate its network interface with the security group mentioned above. Use the following properties:</p>
<ul>
<li><p>The instance type will be <code>t3.micro</code>.</p></li>

<li><p>You will need the AMI ID of the base <strong>Amazon Linux 2 AMI (HVM), SSD Volume Type</strong>, on top of which we’ll install our web server software.  To get this ID, go to the EC2 web console and click on <strong>Launch Instance</strong>. Since we’ll be launching a t3.micro instance, be sure to copy the AMI Id that says 64-bit x86 next to it. </p></li>
</ul>
<blockquote>
  <p>Note that AMI IDs are specific to the region, and keep changing with patches and updates. </p>
</blockquote>
<p>See the snapshot below:</p>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <figure class="figure">
    <img src="img/screenshot-2021-02-16-at-2.18.30-pm.png" alt="Choose the AMI ID" class="img img-fluid">
    <figcaption class="figure-caption">
      <p>Choose the AMI ID</p>
    </figcaption>
  </figure>
</div>


</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <ul>
<li><p>Your EC2 resource’s networking interface will need this property set to true: <code>AssociatePublicIpAddress</code>. It ensures that your server gets assigned a public IP address that you can reach over the internet to verify it’s working correctly.</p></li>
<li><p><strong>Script to run</strong>: We want a script to run automatically at the time of provisioning of the EC2 instance. In the UserData section of this EC2 server, you will deploy the Apache Web Server software that we can then use to verify that the machine correctly deployed. Use the following UserData script for your EC2 CloudFormation Resource:</p></li>
</ul>
<pre><code class="yaml language-yaml">       UserData:
         Fn::Base64: !Sub |
           #!/bin/bash
           sudo yum update -y
           sudo yum install -y httpd
           sudo systemctl start httpd
           sudo systemctl enable httpd</code></pre>
<p>The script above installs, and start the Apache Web Server in the new EC2 instance. Also, it will enable this service to start automatically after reboot. </p>
<ul>
<li><strong>Bonus points:</strong> Write your script to use parameters for the Subnet, VPC and AMI! This will make the script easier to maintain in the future and easier to move to other AWS Regions or accounts.</li>
</ul>
<p>Refer to the <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-instance.html" rel="noopener noreferrer" target="_blank">documentation</a> again to check which properties you want to use.<br />
<br><br></p>
<h3 id="expected-output">Expected Output</h3>
<ul>
<li>To verify, you will use the public IP address of the newly launched EC2 instance, and paste it in a new browser window. You should see the Apache web server test page. </li>
</ul>
<blockquote>
  <p><strong>Note</strong>: Use http ( not https! ), like so: http://public-ip-address </p>
</blockquote>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <figure class="figure">
    <img src="img/screenshot-2021-02-16-at-4.12.14-pm.png" alt="Sample output at http://18.206.98.11/" class="img img-fluid">
    <figcaption class="figure-caption">
      <p>Sample output at <a href="http://18.206.98.11/" rel="noopener noreferrer" target="_blank">http://18.206.98.11/</a></p>
    </figcaption>
  </figure>
</div>


</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <h3 id="solution">Solution</h3>
<div id="spoiler_1" style="display:none">
#### <font color="green">Download the solution files, and run the command below:</font>
<pre><code>aws cloudformation create-stack  --stack-name challenge1 --region us-east-1 --template-body file://challenge1.yml --parameters file://challenge1-parameters.json</code></pre>
Don't forget to change the VPC ID and Subnet ID as applicable to you.
</div>
<p><button type="button" id="myButton1" onclick="if(document.getElementById('spoiler_1') .style.display=='none') {document.getElementById('spoiler_1') .style.display=''}else{document.getElementById('spoiler_1') .style.display='none'}if (document.getElementById('myButton1').innerHTML=='Show Solution') {document.getElementById('myButton1').innerHTML='Hide Solution';}else{document.getElementById('myButton1').innerHTML = 'Show Solution';}">Show Solution</button></p>
</div>

</div>
<div class="divider"></div>
          </div>

          <div class="col-12">
            <p class="text-right">
            </p>
          </div>
        </div>
      </main>

      <footer class="footer">
        <div class="container">
          <div class="row">
            <div class="col-12">
              <p class="text-center">
                <a href="https://us-udacity.github.io/" target="_blank">【udacity2.0 】If you need more courses, please add wechat：udacity6</a>
              </p>
            </div>
          </div>
        </div>
      </footer>
    </div>
  </div>


  <script src="../assets/js/jquery-3.3.1.min.js"></script>
  <script src="../assets/js/plyr.polyfilled.min.js"></script>
  <script src="../assets/js/bootstrap.min.js"></script>
  <script src="../assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
  <script src="../assets/js/katex.min.js"></script>
  <script>
    // Initialize Plyr video players
    const players = Array.from(document.querySelectorAll('video')).map(p => new Plyr(p));

    // render math equations
    let elMath = document.getElementsByClassName('mathquill');
    for (let i = 0, len = elMath.length; i < len; i += 1) {
      const el = elMath[i];

      katex.render(el.textContent, el, {
        throwOnError: false
      });
    }

    // this hack will make sure Bootstrap tabs work when using Handlebars
    if ($('#question-tabs').length && $('#user-answer-tabs').length) {
      $("#question-tabs a.nav-link").on('click', function () {
        $("#question-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
      $("#user-answer-tabs a.nav-link").on('click', function () {
        $("#user-answer-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
    } else {
      $("a.nav-link").on('click', function () {
        $(".tab-pane").hide();
        $($(this).attr("href")).show();
      });
    }

    // side bar events
    $(document).ready(function () {
      $("#sidebar").mCustomScrollbar({
        theme: "minimal"
      });

      $('#sidebarCollapse').on('click', function () {
        $('#sidebar, #content').toggleClass('active');
        $('.collapse.in').toggleClass('in');
        $('a[aria-expanded=true]').attr('aria-expanded', 'false');
      });

      // scroll to first video on page loading
      if ($('video').length) {
        $('html,body').animate({ scrollTop: $('div.plyr').prev().offset().top});
      }

      // auto play first video: this may not work with chrome/safari due to autoplay policy
      if (players && players.length > 0) {
        players[0].play();
      }

      // scroll sidebar to current concept
      const currentInSideBar = $( "ul.sidebar-list.components li a:contains('16. Challenge 1')" )
      currentInSideBar.css( "text-decoration", "underline" );
      $("#sidebar").mCustomScrollbar('scrollTo', currentInSideBar);
    });
  </script>
</body>

</html>
