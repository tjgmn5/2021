<!-- udacity2.0 -->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Production Candidate Promotion Jobs</title>
  <link rel="stylesheet" href="../assets/css/bootstrap.min.css">
  <link rel="stylesheet" href="../assets/css/plyr.css">
  <link rel="stylesheet" href="../assets/css/katex.min.css">
  <link rel="stylesheet" href="../assets/css/jquery.mCustomScrollbar.min.css">
  <link rel="stylesheet" href="../assets/css/styles.css">
  <link rel="shortcut icon" type="image/png" href="../assets/img/udacimak.png" />
</head>

<body>
  <div class="wrapper">
    <nav id="sidebar">
  <div class="sidebar-header">
    <h3>Enabling Continuous Delivery with Deployment Pipelines</h3>
  </div>

  <ul class="sidebar-list list-unstyled CTAs">
    <li>
      <a href="../index.html" class="article">Back to Home</a>
    </li>
  </ul>

  <ul class="sidebar-list list-unstyled components">
    <li class="">
      <a href="01. Introduction.html">01. Introduction</a>
    </li>
    <li class="">
      <a href="02. Big Picture.html">02. Big Picture</a>
    </li>
    <li class="">
      <a href="03. Intuition.html">03. Intuition</a>
    </li>
    <li class="">
      <a href="04. Configuration Management.html">04. Configuration Management</a>
    </li>
    <li class="">
      <a href="05. Design an Ansible Playbook.html">05. Design an Ansible Playbook</a>
    </li>
    <li class="">
      <a href="06. Exercise Define Ansible Playbook.html">06. Exercise: Define Ansible Playbook</a>
    </li>
    <li class="">
      <a href="07. Solution Define Ansible Playbook.html">07. Solution: Define Ansible Playbook</a>
    </li>
    <li class="">
      <a href="08. Build an Inventory File.html">08. Build an Inventory File</a>
    </li>
    <li class="">
      <a href="09. Exercise Inventory File.html">09. Exercise: Inventory File</a>
    </li>
    <li class="">
      <a href="10. Solution Inventory File.html">10. Solution: Inventory File</a>
    </li>
    <li class="">
      <a href="11. Remote Control Using Ansible.html">11. Remote Control Using Ansible</a>
    </li>
    <li class="">
      <a href="12. Exercise Remote Control Using Ansible.html">12. Exercise: Remote Control Using Ansible</a>
    </li>
    <li class="">
      <a href="13. Solution Remote Control Using Ansible.html">13. Solution: Remote Control Using Ansible</a>
    </li>
    <li class="">
      <a href="14. Deployment Jobs.html">14. Deployment Jobs</a>
    </li>
    <li class="">
      <a href="15. Infrastructure Creation Jobs.html">15. Infrastructure Creation Jobs</a>
    </li>
    <li class="">
      <a href="16. Exercise Infrastructure Creation.html">16. Exercise: Infrastructure Creation</a>
    </li>
    <li class="">
      <a href="17. Solution Infrastructure Creation.html">17. Solution: Infrastructure Creation</a>
    </li>
    <li class="">
      <a href="18. Configuration and Deployment Jobs.html">18. Configuration and Deployment Jobs</a>
    </li>
    <li class="">
      <a href="19. Exercise Config and Deployment.html">19. Exercise: Config and Deployment</a>
    </li>
    <li class="">
      <a href="20. Solution Config and Deployment.html">20. Solution: Config and Deployment</a>
    </li>
    <li class="">
      <a href="21. Smoke Testing Jobs.html">21. Smoke Testing Jobs</a>
    </li>
    <li class="">
      <a href="22. Exercise Smoke Testing.html">22. Exercise: Smoke Testing</a>
    </li>
    <li class="">
      <a href="23. Solution Smoke Testing.html">23. Solution: Smoke Testing</a>
    </li>
    <li class="">
      <a href="24. Rollback Jobs.html">24. Rollback Jobs</a>
    </li>
    <li class="">
      <a href="25. Exercise Rollback.html">25. Exercise: Rollback</a>
    </li>
    <li class="">
      <a href="26. Solution Rollback.html">26. Solution: Rollback</a>
    </li>
    <li class="">
      <a href="27. Production Candidate Promotion Jobs.html">27. Production Candidate Promotion Jobs</a>
    </li>
    <li class="">
      <a href="28. Exercise Promote to Production.html">28. Exercise: Promote to Production</a>
    </li>
    <li class="">
      <a href="29. Solution Promote to Production.html">29. Solution: Promote to Production</a>
    </li>
    <li class="">
      <a href="30. Lesson Conclusion.html">30. Lesson Conclusion</a>
    </li>
  </ul>

  <ul class="sidebar-list list-unstyled CTAs">
    <li>
      <a href="../index.html" class="article">Back to Home</a>
    </li>
  </ul>
</nav>

    <div id="content">
      <header class="container-fluild header">
        <div class="container">
          <div class="row">
            <div class="col-12">
              <div class="align-items-middle">
                <button type="button" id="sidebarCollapse" class="btn btn-toggle-sidebar">
                  <div></div>
                  <div></div>
                  <div></div>
                </button>

                <h1 style="display: inline-block">27. Production Candidate Promotion Jobs</h1>
              </div>
            </div>
          </div>
        </div>
      </header>

      <main class="container">
        <div class="row">
          <div class="col-12">
            <div class="ud-atom">
  <h3></h3>
  <div>
  <h2 id="production-candidate-promotion-jobs">Production Candidate Promotion Jobs</h2>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>ND9991 C03 L03 Production Candidate Promotion Jobs</p></h3>
  <video controls>
  <source src="27. ND9991 C03 L03 Production Candidate Promotion Jobs-a0SGXkxmKwg.mp4" type="video/mp4">

  <track default="true" kind="subtitles" srclang="en" src="27. ND9991 C03 L03 Production Candidate Promotion Jobs-a0SGXkxmKwg.en.vtt" label="en">
</video>


</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <h3 id="promoting-to-production">Promoting to Production</h3>
<p>Promoting a new version in a Blue Green Deployment is the same as "switching the router" from the old to the new version. In some cases, the switch is fairly straightforward. In other cases, you might need to have some extra information about the old and new deployments so that you can inform the router of properly. In the case of my examples, we need the S3 Bucket's name so that we can configure CloudFront with a new "<a href="https://docs.aws.amazon.com/cloudfront/latest/APIReference/API_Origin.html" rel="noopener noreferrer" target="_blank">origin</a>".</p>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <figure class="figure">
    <img src="img/005-f.png" alt="**We Did It! Time to Promote!**" class="img img-fluid">
    <figcaption class="figure-caption">
      <p><strong>We Did It! Time to Promote!</strong></p>
    </figcaption>
  </figure>
</div>


</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>ND9991 C03 L03 Production Candidate Promotion Jobs Walkthrough</p></h3>
  <video controls>
  <source src="27. ND9991 C03 L03 Production Candidate Promotion Jobs Walkthrough-12BWa_UpgUg.mp4" type="video/mp4">

  <track default="true" kind="subtitles" srclang="en" src="27. ND9991 C03 L03 Production Candidate Promotion Jobs Walkthrough-12BWa_UpgUg.en.vtt" label="en">
</video>


</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <p>This is it! We've got our green production version humming, smoke tests have passed, confidence is high… it's time to make the switch!</p>
<h3 id="what-do-i-need-for-this-job">What Do I Need for This Job?</h3>
<ol>
<li>A previous job named resources with the workflow ID so that it's easy to refer to them later. For example, if we want to create an S3 bucket:</li>
</ol>
<pre><code>   aws cloudformation deploy \
     --template-file bucket.yml \
     --stack-name "${CIRCLE_WORKFLOW_ID}" \
     --parameter-overrides NAME="${CIRCLE_WORKFLOW_ID}"</code></pre>
<p>And copy the web files to the bucket:</p>
<pre><code>run: aws s3 sync . s3://"${CIRCLE_WORKFLOW_ID}" --delete</code></pre>
<ol>
<li>An image that can handle AWS CLI.</li>
<li>An existing CloudFront distribution, created by CloudFormation so that it has a stack. The origin should be the old production version S3 Bucket.</li>
<li>A CloudFormation template that can update an existing CloudFront stack with a new "origin".</li>
<li>A job to execute the CloudFormation template to switch from blue to green, like this:</li>
</ol>
<pre><code>aws cloudformation deploy \
  --template-file cloudfront.yml \
  --stack-name cloudfront \
  --parameter-overrides PipelineID="${CIRCLE_WORKFLOW_ID}"</code></pre>
</div>

</div>
<div class="divider"></div>
          </div>

          <div class="col-12">
            <p class="text-right">
              <a href="28. Exercise Promote to Production.html" class="btn btn-outline-primary mt-4" role="button">Next Concept</a>
            </p>
          </div>
        </div>
      </main>

      <footer class="footer">
        <div class="container">
          <div class="row">
            <div class="col-12">
              <p class="text-center">
                <a href="https://us-udacity.github.io/" target="_blank">【udacity2.0 】If you need more courses, please add wechat：udacity6</a>
              </p>
            </div>
          </div>
        </div>
      </footer>
    </div>
  </div>


  <script src="../assets/js/jquery-3.3.1.min.js"></script>
  <script src="../assets/js/plyr.polyfilled.min.js"></script>
  <script src="../assets/js/bootstrap.min.js"></script>
  <script src="../assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
  <script src="../assets/js/katex.min.js"></script>
  <script>
    // Initialize Plyr video players
    const players = Array.from(document.querySelectorAll('video')).map(p => new Plyr(p));

    // render math equations
    let elMath = document.getElementsByClassName('mathquill');
    for (let i = 0, len = elMath.length; i < len; i += 1) {
      const el = elMath[i];

      katex.render(el.textContent, el, {
        throwOnError: false
      });
    }

    // this hack will make sure Bootstrap tabs work when using Handlebars
    if ($('#question-tabs').length && $('#user-answer-tabs').length) {
      $("#question-tabs a.nav-link").on('click', function () {
        $("#question-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
      $("#user-answer-tabs a.nav-link").on('click', function () {
        $("#user-answer-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
    } else {
      $("a.nav-link").on('click', function () {
        $(".tab-pane").hide();
        $($(this).attr("href")).show();
      });
    }

    // side bar events
    $(document).ready(function () {
      $("#sidebar").mCustomScrollbar({
        theme: "minimal"
      });

      $('#sidebarCollapse').on('click', function () {
        $('#sidebar, #content').toggleClass('active');
        $('.collapse.in').toggleClass('in');
        $('a[aria-expanded=true]').attr('aria-expanded', 'false');
      });

      // scroll to first video on page loading
      if ($('video').length) {
        $('html,body').animate({ scrollTop: $('div.plyr').prev().offset().top});
      }

      // auto play first video: this may not work with chrome/safari due to autoplay policy
      if (players && players.length > 0) {
        players[0].play();
      }

      // scroll sidebar to current concept
      const currentInSideBar = $( "ul.sidebar-list.components li a:contains('27. Production Candidate Promotion Jobs')" )
      currentInSideBar.css( "text-decoration", "underline" );
      $("#sidebar").mCustomScrollbar('scrollTo', currentInSideBar);
    });
  </script>
</body>

</html>
